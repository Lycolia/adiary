<@6>
<@local(x,ps)>
<$ps=argv#0>
	<table class="blog-setting">
	<tbody>
	<tr>
		<th>モジュールタイトル<span class="help" data-help="Twitterモジュールのタイトルです。">?</span></th>
		<td><input type="text" class="w160" name="title" value="<@ps.title || 'Twitter'>" maxlength="64"></td>
	</tr>
	<tr>
		<th>タイトル表示</th>
		<td>
			<input type="checkbox" name="title_none" value="1"<@if(ps.title_none,' checked')>><label>非表示にする</label>
		</td>
	</tr>
	</tbody>
	</table>

	<p>先に<a href="https://twitter.com/settings/widgets" target="_blank">Twitterの設定画面</a>からウィジェットを作成しておく必要があります。</p>

	<table>
	<tbody>
	<tr>
		<th>自動挿入</th><td><button type="button" data-title="Twitter id/widget-idの自動設定" id="auto-setting" data-msg="TwitterウィジョットのHTMLコードを貼り付けてください" data-ok="設定" data-cancel="キャンセル">ウィジェットコードから自動設定する</button></td>
	</tr>
	<tr>
		<th>Twitterのid</th><td><input type="text" class="w200" name="id" value="<@ps.id>" id="tw-id"></td>
	</tr>
	<tr>
		<th>data-widget-id</th><td><input type="text" class="w200" name="widget_id" value="<@ps.widget_id>" id="widget-id"></td>
	</tr>
	</tbody>
	</table>

	<h3>表示設定</h3>

	<table>
	<tbody>
	<tr>
		<th>表示サイズ：横幅</th>
		<td>
		<input type="number" name="size_x" class="w80" value="<@ps.size_x || 0>" min="0" max="9999"> 
		0：のとき自動調整
		</td>
	</tr>
	<tr>
		<th>表示サイズ：高さ</th>
		<td>
		<input type="number" name="size_y" class="w80" value="<@ps.size_y || 0>" min="0" max="9999"> 
		0：デフォルト
		</td>
	</tr>
	<tr><th>非表示設定</th>
		<td>
			<input type="checkbox" name="noheader" value="1"<@if(ps.noheader || ps.noheader eq '', ' checked')>>
			<label>ヘッダーを非表示</label><br>
			<input type="checkbox" name="nofooter" value="1"<@if(ps.nofooter, ' checked')>>
			<label>フッター（ツイートボックス）を非表示</label><br>
			<input type="checkbox" name="noborders" value="1"<@if(ps.noborders, ' checked')>>
			<label>ボーダー（境界線）を非表示</label><br>
			<input type="checkbox" name="noscrollbar" value="1"<@if(ps.noscrollbar, ' checked')>>
			<label>スクロールバーを非表示</label><br>
			<input type="checkbox" name="noactions" value="1"<@if(ps.noactions || ps.noactions eq '', ' checked')>>
			<label>ツイートアクションを非表示</label><br>
			<input type="checkbox" name="transparent" value="1"<@if(ps.transparent, ' checked')>>
			<label>背景を透明にする</label><br>
		</td>
	</tr>
	<tr>
		<th>ヘッダの背景色</th><td>
		<input type="text" id="bg" name="bg" value="<@ps.bg>" class="color-picker">
		</td>
	</tr>
	<tr>
		<th>ヘッダの文字色</th><td>
		<input type="text" id="fc" name="fc" value="<@ps.fc>" class="color-picker">
		</td>
	</tr>
	<tr>
		<th>ツイートの背景色</th><td>
		<input type="text" id="twbg" name="twbg" value="<@ps.twbg>" class="color-picker">
		</td>
	</tr>
	<tr>
		<th>ツイートの文字色</th><td>
		<input type="text" id="twfc" name="twfc" value="<@ps.twfc>" class="color-picker">
		</td>
	</tr>
	<tr>
		<th>境界線の色</th><td>
		<input type="text" id="border" name="border" value="<@ps.border>" class="color-picker">
		</td>
	</tr>
	<tr>
		<th>リンクの色</th><td>
		<input type="text" id="twlinks" name="twlinks" value="<@ps.twlinks>" class="color-picker">
		</td>
	</tr>
	</tbody>
	</table>

	<p>※色を指定しない場合、配色はTwitterのデフォルトになります。Twitterの仕様によりIE8非対応です。</p>

<script>
$('#auto-setting').click(function(evt){
	textarea_dialog(evt.target, function(data){
		var x;
		if (x = data.match(/>\s*\@(\w+)/)) {
			$('#tw-id').val( x[1] );
		}
		if (x = data.match(/ data-widget-id\s*=\s*"(\d+)/)) {
			$('#widget-id').val( x[1] );
		}
	});

});
</script>
