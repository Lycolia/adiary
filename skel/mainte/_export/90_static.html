<@6>
<@>
<@> HTML形式
<@>
<$ifbreak(! v.static_output_dir)>
<$logs = argv#0>
<$opt  = argv#1>
<@ifexec(! logs, begin)>
<h3 id="static">静的出力</h3>
<div>
	<p>コンテンツ記事を <a href="<@Basepath><@v.static_output_dir>"><@v.static_output_dir></a> に<strong>HTML化して</strong>出力します。</p>

	<ul class="none">
		<li><input type="checkbox" name="static:clear" value="1"><label>出力ディレクトリ内を初期化する</label></li>
		<li><input type="checkbox" name="static:nocom" value="1" checked><label>コメント欄を表示しない</label></li>
		<li><input type="checkbox" name="static:usercss" value="1"><label>ユーザーCSSを使用する</label></li>
		<@if(v.blog.gaid, begin_array)>
		<li><input type="checkbox" name="static:gaid" value="1"><label>Google Analyticsを埋め込む</label></li>
		<$end>
	</ul>

	<p>※一部リンク書き換え等が完全ではありません。</p>

	<button type="button" name="type" value="90_static" data-class="static" id="static-export" class="export">HTML化して出力</button><br>

	<textarea id="session-log" rows="10" class="w98p" style="display: none" data-myself="<@v.myself>" data-interval="300" readonly></textarea>
</div>


<div style="display:none"><script>
adiary_session($('#static-export'), {
	myself: $('#session-log').data('myself'),
	load_formdata: function(btn) {
		var fd = $('#export-form').serialize();
		fd += '&' + $.param({
			type: btn.val(),
			article_type: 'wiki',
			enable_only: 1,
			class: btn.data('class')
		});
		return fd;
	}
});
</script></div>
<$break()>
<$end>
<@>-----------------------------------------------------------------------------
<@> 静的HTML出力 exporter
<@>-----------------------------------------------------------------------------
<$exporter = loadapp('adiary::Export_static_html')>
<$ifbreak(!exporter)>
<$ajax_return = exporter.export( logs, opt )>
