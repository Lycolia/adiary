<@6>
<@local(s,tp,t)>
<$s = v.blog>
<$ifredirect(!v.blog_admin, v.myself)>

<@>システムモード移行前に
<$theme = v.theme>

<@><!--========================================================================-->
<@> システムモード
<$v.special_system_mode("テーマ選択")>

<$v.regist_js("<@v.script_dir>theme-custom.js")>

<$v.append_header(exec(begin))>
<style>
* {
	margin:		0;
	padding:	0;
}
html, #body {
	height:		100%;
	overflow:	hidden;
<@ifexec(!Develop, begin)>
	overflow:	hidden;
<$end>
}
#body {
	background-color:	#008;
	font-size:		11pt;
}
#back-btn {
	position:		absolute;
	top:			2px;
	right:			4px;
}
#form {
	color:			#fff;
	margin:			2px 4px;
}
#form button + button {
	margin:			inherit;
}
select {
	padding:		0px 1px;
}
button {
	padding:		0 3px;
}
#iframe {
	width:			100%;
	padding:		0;
	min-height:		0;
	overflow-x:		hidden;
	overflow-y:		scrollbar;
	border:			none;
	background-color:	#fff;

	position:		absolute;
	left:			0px;
}
#custom-form {
	font-size:		10pt;
	color:			#000;
	background-color:	#eef;
	margin-bottom:		6px;
}
.color-box {
	margin:			1px 4px;
	display:		inline-block;
}
.color-box .colorbox {
	margin-left:		2px;
}
.color-box input {
	width:			50px;
}
.ui-slider {
	display:		inline-block;
	height:			6px;
}
.ui-slider .ui-slider-handle {
	height:			16px;
	width:			8px;
	margin-top:		-2px;
	margin-left:		-4px;
	border-color:		#66c;
	background-color:	#aaf;
}
#h-slider {
	width:			160px;
}
#s-slider, #v-slider {
	width:			80px;
}
div.iblk {
	display:		inline-block;
	margin-left:		4px;
}
.help {
	font-size:		10pt;
}
</style>
<$end>
<!--========================================================================-->
<form id="form" action="<@v.myself>?<@v.skeleton>" method="POST">
<input type="hidden" name="action" value="<@v.skeleton>">
<input type="hidden" name="csrf_check_key" value="<@CSRF_check_key>">
<@v.title> 
<select id="theme-select" name="theme">
<@forexec(tp, v.load_templates(), begin)>
<@forexec(t,  v.load_themes(tp), begin)>
	<option value="<@tp><@t.name>" data-readme="<@t.readme>"<@if("<@tp><@t.name>" eq theme, ' selected')>><@tp><@t.name></option>
<$end>
<$end>
</select>
<button type="submit">保存</button>
<button type="button" onclick="window.location='<@v.myself>?<@v.skel_dir>'">戻る</button>

&emsp;<button type="button" id="readme-button" class="js-info btn-help" data-title="README" data-url="" data-class="pre" data-help="スマホ非対応テーマを使用する場合、スマホアクセスには標準のスマホ対応テーマが使用されます。">README表示</button>
<input type="hidden" name="checkbox.info" value="sysmode_notheme_flg">
<input type="checkbox" name="sysmode_notheme_flg" id="sysmode-no" data-orig="<@s.sysmode_notheme>" value="1"<@if(s.sysmode_notheme, ' checked')>><label class="small">管理画面は標準テーマを使用</label>

<div id="custom-form">
<div id="custom-functions">
<@ifexec(0, begin)> <@>式解析デバッグ
<div>
	式 : <input type="text" class="w300" id="expression"><button id="parse" type="button">解析</button><br>
	答 : <input type="text" class="w300" id="solution" readonly>
</div>
<$end>
<input type="hidden" name="custom" value="" id="custom-flag">
<button type="button" id="btn-reset">リセット</button>
<button type="button" id="btn-super-reset">テーマ初期値に</button>
<input type="checkbox" class="js-switch" data-target="#custom-colors-detail" id="detail-mode"><label>詳細</label>
<div class="iblk">H <div id="h-slider" class="silder"></div></div>
<div class="iblk">S <div id="s-slider" class="silder"></div></div>
<div class="iblk">V <div id="v-slider" class="silder"></div></div>
</div>
<div id="custom-colors"></div>
<div id="custom-colors-detail"></div>
</div>
</form>

<iframe id="iframe"></iframe>

<!--========================================================================-->

<div style="display: none">
<textarea id="attr-msg">
bg=背景
border=枠
footnote=注釈
font=文字
link=リンク
btn=ボタン
art=記事
main=メイン
base=基本
com=コメント
icon=アイコン
arrow=矢印
hover=選択中
dd=ddmenu
header=ヘッダ
footer=フッタ
fix=*
module=モジュール
strong=強調
</textarea>
<span id="css-exp-error">CSSで指定されている色式が正しくありません。<br>%s</span>
<span id="sysmode-no-warning">このテーマは管理画面非対応です。表示が崩れることがあるかもしれません。それでも管理画面で使用しますか？</span>
</div>
